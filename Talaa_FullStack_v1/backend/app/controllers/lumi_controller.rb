class LumiController < ApplicationController; def chat; txt=params[:message].to_s.downcase; if txt.include?("rate")||txt.include?("exchange"); q={rate:14.5, fee:1.0, received:144.5}; return render json:{session_id:"ls_#{SecureRandom.hex(4)}", reply:{type:"tool", name:"fx_quote", result:{data:q}}}; end; if txt.include?("rail"); names=%w[nsano zeepay hubtel]; data=names.map{|n| {name:n, status: Rails.cache.fetch("rail:gh:#{n}:status"){ "unknown" }}}; return render json:{session_id:"ls_#{SecureRandom.hex(4)}", reply:{type:"tool", name:"rail_status", result:{data:data}}}; end; render json:{session_id:"ls_#{SecureRandom.hex(4)}", reply:{type:"text", content:"How can I help? Try: 'FX rate for USD 100 to GHS' or 'rail status'."}}; end; end
