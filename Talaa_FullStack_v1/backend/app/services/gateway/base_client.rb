require 'faraday'; require 'oj'; module Gateway; class BaseClient; def initialize(base:, key:nil, secret:nil); @http=Faraday.new(url:base){|f| f.request :json; f.response :json, content_type:/json|plain/; f.adapter Faraday.default_adapter }; @key=key; end; def post(path, body={}); @http.post(path, body, {"Authorization"=>"Bearer #{@key}","Content-Type"=>"application/json"}) end; def get(path, params={}); @http.get(path, params, {"Authorization"=>"Bearer #{@key}"}) end; end; end
