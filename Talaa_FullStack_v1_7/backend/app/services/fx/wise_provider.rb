require 'securerandom'; module FX; class WiseProvider < BaseProvider; def initialize; @base=ENV['WISE_BASE']; @key=ENV['WISE_KEY']; end; def quote(source:, target:, amount:); rate=14.60; fee=(amount*0.009).round(2); received=((amount-fee)*rate).round(2); {provider:'wise', rate:rate, fee:fee, received:received}; end; def trade_and_payout(source_currency:, source_amount:, target_currency:, recipient_msisdn:, recipient_network:, reference:); { ok:true, fx_ref:"wise_#{SecureRandom.hex(4)}", payout_ref:"gh_#{SecureRandom.hex(4)}" }; end; end; end
